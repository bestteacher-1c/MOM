
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	//++ НЕ УТ
	Список.ТекстЗапроса =
		"ВЫБРАТЬ РАЗЛИЧНЫЕ
		|	Т.Ссылка КАК Ссылка
		|ПОМЕСТИТЬ ПравилаСОтбором
		|ИЗ
		|	(ВЫБРАТЬ
		|		Материалы.Ссылка КАК Ссылка
		|	ИЗ
		|		Справочник.ПравилаРаспределенияРасходов.ОтборПоМатериалам КАК Материалы
		|	
		|	ОБЪЕДИНИТЬ ВСЕ
		|	
		|	ВЫБРАТЬ
		|		ПравилаРаспределенияРасходовОтборПоВидамРабот.Ссылка
		|	ИЗ
		|		Справочник.ПравилаРаспределенияРасходов.ОтборПоВидамРабот КАК ПравилаРаспределенияРасходовОтборПоВидамРабот
		|	
		|	ОБЪЕДИНИТЬ ВСЕ
		|	
		|	ВЫБРАТЬ
		|		ПравилаРаспределенияРасходовОтборПоПродукции.Ссылка
		|	ИЗ
		|		Справочник.ПравилаРаспределенияРасходов.ОтборПоПродукции КАК ПравилаРаспределенияРасходовОтборПоПродукции) КАК Т
		|
		|ИНДЕКСИРОВАТЬ ПО
		|	Т.Ссылка
		|;
		|
		|////////////////////////////////////////////////////////////////////////////////
		|ВЫБРАТЬ
		|	Правила.Ссылка КАК Ссылка,
		|	Правила.Наименование КАК Наименование
		|ИЗ
		|	Справочник.ПравилаРаспределенияРасходов КАК Правила
		|		ЛЕВОЕ СОЕДИНЕНИЕ ПравилаСОтбором КАК ПравилаСОтбором
		|		ПО Правила.Ссылка = ПравилаСОтбором.Ссылка
		|ГДЕ
		|	НЕ Правила.Устаревшее
		|	И (&ТолькоСЗаданнымОтбором
		|				И НЕ ПравилаСОтбором.Ссылка ЕСТЬ NULL
		|			ИЛИ НЕ &ТолькоСЗаданнымОтбором)";
				
	ОбщегоНазначенияКлиентСервер.УстановитьПараметрДинамическогоСписка(
			Список,
			"ТолькоСЗаданнымОтбором",
			Параметры.ТолькоСЗаданнымОтбором);
			
	//-- НЕ УТ			
			
КонецПроцедуры
